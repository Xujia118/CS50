#include <cs50.h>
#include <stdio.h>

int main (void)

{
    //prompt user for card number
    long n = get_long("Card number: ");

    //checksum
    int a,b,c,d,e,f,g,h;
    int i,j,k,l,m,q,o,p;

    a = n % 10;
    b = (n % 100 - n % 10) / 10;
    c = (n % 1000 - n % 100) / 100;
    d = (n % 10000 - n % 1000) / 1000;
    e = (n % 100000 - n % 10000) / 10000;
    f = (n % 1000000 - n % 100000) / 100000;
    g = (n % 10000000 - n % 1000000) / 1000000;
    h = (n % 100000000 - n % 10000000) / 10000000;
    i = (n % 1000000000 - n % 100000000) / 100000000;
    j = (n % 10000000000 - n % 1000000000) / 1000000000;
    k = (n % 100000000000 - n % 10000000000) / 10000000000;
    l = (n % 1000000000000 - n % 100000000000) / 100000000000;
    m = (n % 10000000000000 - n % 1000000000000) / 1000000000000;
    q = (n % 100000000000000 - n % 10000000000000) / 10000000000000;
    o = (n % 1000000000000000 - n % 100000000000000) / 100000000000000;
    p = (n % 10000000000000000 - n % 1000000000000000) / 1000000000000000;

    // = b*2 + d*2 + f*2 + h*2 + j*2 + l*2 + n*2 + p*2;
    int B,D,F,H,J,L,Q,P;
    B = b*2 % 10 + (b*2 - b*2 % 10) / 10;
    D = d*2 % 10 + (d*2 - d*2 % 10) / 10;
    F = f*2 % 10 + (f*2 - f*2 % 10) / 10;
    H = h*2 % 10 + (h*2 - h*2 % 10) / 10;
    J = j*2 % 10 + (j*2 - j*2 % 10) / 10;
    L = l*2 % 10 + (l*2 - l*2 % 10) / 10;
    Q = q*2 % 10 + (q*2 - q*2 % 10) / 10;
    P = p*2 % 10 + (p*2 - p*2 % 10) / 10;

    // = a + c + e + g + i + k + m + o;
    int A,C,E,G,I,K,M,O;
    A = a % 10 + (a - a % 10) / 10;
    C = c % 10 + (c - c % 10) / 10;
    E = e % 10 + (e - e % 10) / 10;
    G = g % 10 + (g - g % 10) / 10;
    I = i % 10 + (i - i % 10) / 10;
    K = k % 10 + (k - k % 10) / 10;
    M = m % 10 + (m - m % 10) / 10;
    O = o % 10 + (o - o % 10) / 10;

    int x,y,z;
    x = B + D + F + H + J + L + Q + P;
    y = A + C + E + G + I + K + M + O;
    z = x + y;

    //if it passes, identify company
    if (z % 10 == 0)

    {
        if (n / 10000000000000 == 34 || n / 10000000000000 == 37)
        {
            printf("AMEX\n");
        }

        if (50 < n / 100000000000000 && n / 100000000000000 < 56)
        {
            printf("MASTERCARD\n");
        }

        if (n / 1000000000000 == 4 || n / 1000000000000000 == 4)
        {
            printf("VISA\n");
        }
    }

    else printf("Invalid. \n");
}
